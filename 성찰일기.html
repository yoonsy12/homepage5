<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì„±ì°° ì¼ê¸° - Daily Journal</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 36px;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 16px;
            opacity: 0.9;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        .card-title {
            font-size: 20px;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .date-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 15px;
            margin-bottom: 15px;
            transition: border-color 0.3s;
        }

        .date-input:focus {
            outline: none;
            border-color: #667eea;
        }

        textarea {
            width: 100%;
            min-height: 200px;
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 15px;
            font-family: inherit;
            resize: vertical;
            transition: border-color 0.3s;
            line-height: 1.6;
        }

        textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .char-count {
            text-align: right;
            color: #718096;
            font-size: 13px;
            margin-top: 8px;
        }

        .btn {
            width: 100%;
            padding: 14px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 15px;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5a67d8;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #48bb78;
            color: white;
        }

        .btn-secondary:hover {
            background: #38a169;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(72, 187, 120, 0.4);
        }

        .journal-list {
            max-height: 500px;
            overflow-y: auto;
        }

        .journal-item {
            background: #f7fafc;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 8px;
            transition: all 0.3s;
        }

        .journal-item:hover {
            background: #edf2f7;
            transform: translateX(5px);
        }

        .journal-date {
            font-size: 14px;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 8px;
        }

        .journal-content {
            color: #2d3748;
            font-size: 14px;
            line-height: 1.6;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .journal-actions {
            margin-top: 10px;
            display: flex;
            gap: 10px;
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 13px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-edit {
            background: #4299e1;
            color: white;
        }

        .btn-edit:hover {
            background: #3182ce;
        }

        .btn-delete {
            background: #fc8181;
            color: white;
        }

        .btn-delete:hover {
            background: #f56565;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #a0aec0;
        }

        .empty-icon {
            font-size: 64px;
            margin-bottom: 15px;
        }

        .stats {
            background: white;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            display: flex;
            justify-content: space-around;
            align-items: center;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 32px;
            font-weight: 700;
            color: #667eea;
        }

        .stat-label {
            font-size: 14px;
            color: #718096;
            margin-top: 5px;
        }

        .search-box {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 15px;
            margin-bottom: 15px;
        }

        .search-box:focus {
            outline: none;
            border-color: #667eea;
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: #667eea;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“– ì„±ì°° ì¼ê¸°</h1>
            <p>ë§¤ì¼ì˜ ë°°ì›€ê³¼ ì„±ì°°ì„ ê¸°ë¡í•˜ì„¸ìš”</p>
        </div>

        <div class="stats">
            <div class="stat-item">
                <div class="stat-number" id="totalEntries">0</div>
                <div class="stat-label">ì „ì²´ ì¼ê¸°</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="thisMonth">0</div>
                <div class="stat-label">ì´ë²ˆ ë‹¬</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="totalWords">0</div>
                <div class="stat-label">ì´ ê¸€ì ìˆ˜</div>
            </div>
        </div>

        <div class="main-grid" style="margin-top: 20px;">
            <div class="card">
                <h2 class="card-title">âœï¸ ì˜¤ëŠ˜ì˜ ì„±ì°°</h2>
                <input type="date" id="journalDate" class="date-input">
                <textarea id="journalText" placeholder="ì˜¤ëŠ˜ ë°°ìš´ ê²ƒ, ëŠë‚€ ê²ƒ, ìƒê°í•œ ê²ƒì„ ììœ ë¡­ê²Œ ì ì–´ë³´ì„¸ìš”...

ì˜ˆì‹œ:
- ì˜¤ëŠ˜ ë°°ìš´ ìƒˆë¡œìš´ ê°œë…ì´ë‚˜ ì§€ì‹
- ì—°êµ¬/í•™ìŠµ ê³¼ì •ì—ì„œì˜ ì–´ë ¤ì›€ê³¼ ê·¹ë³µ ë°©ë²•
- ì•ìœ¼ë¡œ ì‹œë„í•´ë³´ê³  ì‹¶ì€ ê²ƒë“¤
- ê°ì‚¬í•œ ì¼ì´ë‚˜ ê¸ì •ì ì¸ ê²½í—˜"></textarea>
                <div class="char-count">
                    <span id="charCount">0</span>ì
                </div>
                <button class="btn btn-primary" onclick="saveJournal()">ğŸ’¾ ì €ì¥í•˜ê¸°</button>
                <button class="btn btn-secondary" onclick="exportJournals()">ğŸ“¥ ì „ì²´ ë‚´ë³´ë‚´ê¸° (í…ìŠ¤íŠ¸)</button>
            </div>

            <div class="card">
                <h2 class="card-title">ğŸ“š ì§€ë‚œ ê¸°ë¡</h2>
                <input type="text" id="searchBox" class="search-box" placeholder="ğŸ” ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." oninput="searchJournals()">
                <div class="journal-list" id="journalList"></div>
            </div>
        </div>
    </div>

    <script>
        let journals = [];
        let editingId = null;

        // ì˜¤ëŠ˜ ë‚ ì§œë¡œ ì´ˆê¸°í™”
        document.getElementById('journalDate').valueAsDate = new Date();

        // localStorageì—ì„œ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
        function loadJournals() {
            const saved = localStorage.getItem('dailyJournals');
            if (saved) {
                try {
                    journals = JSON.parse(saved);
                    journals.sort((a, b) => new Date(b.date) - new Date(a.date));
                } catch (e) {
                    console.error('ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:', e);
                    journals = [];
                }
            }
        }

        // localStorageì— ì €ì¥
        function saveToStorage() {
            localStorage.setItem('dailyJournals', JSON.stringify(journals));
        }

        // ì¼ê¸° ì €ì¥
        function saveJournal() {
            const date = document.getElementById('journalDate').value;
            const text = document.getElementById('journalText').value.trim();

            if (!date) {
                alert('ë‚ ì§œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!');
                return;
            }

            if (!text) {
                alert('ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }

            if (editingId !== null) {
                // ìˆ˜ì • ëª¨ë“œ
                const journal = journals.find(j => j.id === editingId);
                if (journal) {
                    journal.date = date;
                    journal.text = text;
                    journal.updatedAt = new Date().toISOString();
                }
                editingId = null;
            } else {
                // ìƒˆë¡œ ì‘ì„±
                const journal = {
                    id: Date.now(),
                    date: date,
                    text: text,
                    createdAt: new Date().toISOString()
                };
                journals.unshift(journal);
            }

            saveToStorage();
            document.getElementById('journalText').value = '';
            document.getElementById('journalDate').valueAsDate = new Date();
            renderJournals();
            updateStats();
            alert('ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤! âœ…');
        }

        // ì¼ê¸° ëª©ë¡ ë Œë”ë§
        function renderJournals(filteredJournals = null) {
            const list = document.getElementById('journalList');
            const displayJournals = filteredJournals || journals;

            if (displayJournals.length === 0) {
                list.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">ğŸ“</div>
                        <p>ì•„ì§ ì‘ì„±ëœ ì¼ê¸°ê°€ ì—†ìŠµë‹ˆë‹¤.<br>ì²« ë²ˆì§¸ ì„±ì°°ì„ ê¸°ë¡í•´ë³´ì„¸ìš”!</p>
                    </div>
                `;
                return;
            }

            list.innerHTML = displayJournals.map(journal => `
                <div class="journal-item">
                    <div class="journal-date">ğŸ“… ${formatDate(journal.date)}</div>
                    <div class="journal-content">${escapeHtml(journal.text)}</div>
                    <div class="journal-actions">
                        <button class="btn-small btn-edit" onclick="editJournal(${journal.id})">ìˆ˜ì •</button>
                        <button class="btn-small btn-delete" onclick="deleteJournal(${journal.id})">ì‚­ì œ</button>
                    </div>
                </div>
            `).join('');
        }

        // ì¼ê¸° ìˆ˜ì •
        function editJournal(id) {
            const journal = journals.find(j => j.id === id);
            if (journal) {
                document.getElementById('journalDate').value = journal.date;
                document.getElementById('journalText').value = journal.text;
                editingId = id;
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        // ì¼ê¸° ì‚­ì œ
        function deleteJournal(id) {
            if (confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                journals = journals.filter(j => j.id !== id);
                saveToStorage();
                renderJournals();
                updateStats();
            }
        }

        // ê²€ìƒ‰ ê¸°ëŠ¥
        function searchJournals() {
            const keyword = document.getElementById('searchBox').value.toLowerCase();
            if (!keyword) {
                renderJournals();
                return;
            }

            const filtered = journals.filter(j => 
                j.text.toLowerCase().includes(keyword) || 
                j.date.includes(keyword)
            );
            renderJournals(filtered);
        }

        // í†µê³„ ì—…ë°ì´íŠ¸
        function updateStats() {
            const total = journals.length;
            const thisMonth = journals.filter(j => {
                const journalDate = new Date(j.date);
                const now = new Date();
                return journalDate.getMonth() === now.getMonth() && 
                       journalDate.getFullYear() === now.getFullYear();
            }).length;
            const totalChars = journals.reduce((sum, j) => sum + j.text.length, 0);

            document.getElementById('totalEntries').textContent = total;
            document.getElementById('thisMonth').textContent = thisMonth;
            document.getElementById('totalWords').textContent = totalChars.toLocaleString();
        }

        // ë‚ ì§œ í¬ë§·
        function formatDate(dateStr) {
            const date = new Date(dateStr);
            const year = date.getFullYear();
            const month = date.getMonth() + 1;
            const day = date.getDate();
            const weekdays = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
            const weekday = weekdays[date.getDay()];
            return `${year}ë…„ ${month}ì›” ${day}ì¼ (${weekday})`;
        }

        // HTML ì´ìŠ¤ì¼€ì´í”„
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // ê¸€ì ìˆ˜ ì¹´ìš´í„°
        document.getElementById('journalText').addEventListener('input', function() {
            const count = this.value.length;
            document.getElementById('charCount').textContent = count.toLocaleString();
        });

        // ì „ì²´ ë‚´ë³´ë‚´ê¸°
        function exportJournals() {
            if (journals.length === 0) {
                alert('ë‚´ë³´ë‚¼ ì¼ê¸°ê°€ ì—†ìŠµë‹ˆë‹¤!');
                return;
            }

            let content = '='.repeat(50) + '\n';
            content += 'ì„±ì°° ì¼ê¸° ì „ì²´ ê¸°ë¡\n';
            content += '='.repeat(50) + '\n\n';

            journals.forEach(journal => {
                content += `ğŸ“… ${formatDate(journal.date)}\n`;
                content += '-'.repeat(50) + '\n';
                content += journal.text + '\n\n';
                content += '='.repeat(50) + '\n\n';
            });

            const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `ì„±ì°°ì¼ê¸°_${new Date().toISOString().split('T')[0]}.txt`;
            a.click();
            URL.revokeObjectURL(url);
        }

        // ì´ˆê¸°í™”
        loadJournals();
        renderJournals();
        updateStats();
    </script>
</body>
</html>